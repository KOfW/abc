<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Danh Sách Mẫu Đánh Giá</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
    />
    <style>
      tr:hover {
        background-color: #f1f1f1;
      }
    </style>
  </head>
  <body>
    <div class="container mt-4">
      <h2 class="mb-4">Danh Sách Mẫu Đánh Giá</h2>

      <div class="mb-3">
        <button class="btn btn-secondary" onclick="goBack()">
          <i class="fas fa-arrow-left"></i> Quay về
        </button>
        <button class="btn btn-success" onclick="addTemplate()">
          <i class="fas fa-plus"></i> Thêm Mẫu
        </button>
      </div>

      <input
        type="text"
        id="searchInput"
        class="form-control mb-3"
        placeholder="Tìm kiếm theo tên hoặc ngày tạo..."
        onkeyup="searchTemplate()"
      />

      <table class="table table-bordered">
        <thead>
          <tr>
            <th>Tên Mẫu</th>
            <th>Thời Gian Tạo</th>
            <th>Hành động</th>
          </tr>
        </thead>
        <tbody id="templateTable">
          <tr>
            <td>Mẫu Đánh Giá T3/2025</td>
            <td>03/03/2025</td>
            <td>
              <a
                href="#"
                class="btn btn-primary btn-sm"
                onclick="viewTemplate(this)"
              >
                <i class="fas fa-eye"></i> Xem
              </a>
              <button
                class="btn btn-danger btn-sm"
                onclick="confirmDelete(this)"
              >
                <i class="fas fa-trash"></i> Xóa
              </button>
            </td>
          </tr>
          <tr>
            <td>Mẫu Đánh Giá T3/2024</td>
            <td>26/03/2024</td>
            <td>
              <a
                href="#"
                class="btn btn-primary btn-sm"
                onclick="viewTemplate(this)"
              >
                <i class="fas fa-eye"></i> Xem
              </a>
              <button
                class="btn btn-danger btn-sm"
                onclick="confirmDelete(this)"
              >
                <i class="fas fa-trash"></i> Xóa
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <script>
      function addTemplate() {
        window.location.href = "Evaluation_Form.html";
      }

      function goBack() {
        window.location.href = "index.html";
      }

      function confirmDelete(btn) {
        if (confirm("Bạn có chắc chắn muốn xóa mẫu này?")) {
          deleteRow(btn);
        }
      }

      function deleteRow(btn) {
        let row = btn.closest("tr");
        row.parentNode.removeChild(row);
      }

      function searchTemplate() {
        let input = document.getElementById("searchInput").value.toLowerCase();
        let rows = document.querySelectorAll("#templateTable tr");

        rows.forEach((row) => {
          let name = row.cells[0].innerText.toLowerCase();
          let date = row.cells[1].innerText.toLowerCase();
          row.style.display =
            name.includes(input) || date.includes(input) ? "" : "none";
        });
      }

      function viewTemplate(button) {
        let row = button.closest("tr");
        let name = row.cells[0].innerText;
        let timestamp = row.cells[1].innerText;

        let url = `view_Evaluation.html?name=${encodeURIComponent(
          name
        )}&timestamp=${encodeURIComponent(timestamp)}`;
        window.location.href = url;
      }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
